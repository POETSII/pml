{
	"type": "asp",
	"model": "tiles",
	"constants": {
		"rootCount": 10
	},
	"properties": {
		"tileCount": { "type": "uint32_t", "default": "tileCount" },
		"nodeCount": { "type": "uint32_t", "default": "nodeCount" },
		"rootCount": { "type": "uint32_t", "default": "rootCount" }
	},
	"messages": {
		"heartbeat": {
			"src": [],
			"dst": ["node"]
		},
		"update": {
			"src": ["node"],
			"dst": ["node"],
			"fields": {
				"rootIdx": { "type": "uint32_t" },
				"hops": { "type": "uint32_t" }
			}
		},
		"finished": {
			"src": ["node"],
			"dst": ["supervisor"],
			"fields": {
				"graphInst": { "type": "uint32_t" },
				"id": { "type": "uint32_t" },
				"fin": { "type": "uint8_t" },
				"finIdx": { "type": "uint16_t" },
				"avgHops": { "type": "float" }
			}
		}
	},
	"devices": {
		"node" : {
			"instance": "node",
			"properties": {
				"graphInst": { "type": "uint32_t", "generator": "tile" },
				"id": { "type": "uint32_t", "generator": "id" },
				"rootIdx": { "type": "int32_t", "default": -1, "generator": "get_root_index" }
			},
			"state": {
				"fin": { "type": "uint8_t", "default": 0 },
				"finSent": { "type": "uint8_t", "default": 0 },
				"finIdx": { "type": "uint16_t", "default": 0 },
				"buff": { "type": "uint32_t", "length": "rootCount" },
				"updated": { "type": "uint8_t", "length": "rootCount" },
				"updatePending": { "type": "uint32_t" }
			}
		},
		"supervisor" : {
			"instance": "supervisor",
			"doc": "TODO: supervisor is not implemented yet",
			"properties": {
				"nodeCount": { "type": "uint32_t", "default": "totalNodeCount" },
				"loopMax": { "type": "uint32_t", "default": 1000 }
			},
			"state": {
				"fin": { "type": "uint8_t", "length":  "totalNodeCount" },
				"finIdx": { "type": "uint16_t", "length":  "totalNodeCount" },
				"avgHops": { "type": "float", "length":  "totalNodeCount" },
				"loopCount": { "type": "uint32_t", "default": 0 }
			}
		}
	}
}